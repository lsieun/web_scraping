
target_url = "https://mp.weixin.qq.com/s?__biz=MjM5MDgzMDgwMw==&mid=2651745661&idx=1&sn=e8ee00203a44015f7072429b1e01db4a&chksm=bd4414c18a339dd711f0c0c69dfa41947a8091f79d529b4d2408db53f492accf6ae402771b58&scene=4&subscene=126&ascene=0&devicetype=iOS11.4&version=16070022&nettype=WIFI&abtest_cookie=AwABAAoACwAMAAcAPoseAGSVHgC5lR4AF5YeAIaWHgCMlh4AI5ceAAAA&lang=en&fontScale=100&pass_ticket=y3bD%2BACG5stP%2F%2B7ldcfAxgFPLWPs%2FbSViNfqmX%2F2eLieOxArs3%2FzzfmWbe1mlcGU&wx_header=1 "
target_url = "https://mp.weixin.qq.com/s?__biz=MjM5MDgzMDgwMw==&mid=2651745661&idx=2&sn=12895e852dbf70211acd29a77db34efa&chksm=bd4414c18a339dd702a0bb96203cc063ad4652859100b362f6af421a967cb8b6eb244a4d6390&scene=4&ascene=0&devicetype=iOS11.4&version=16070022&nettype=WIFI&abtest_cookie=AwABAAoACwAMAAcAPoseAGSVHgC5lR4AF5YeAIaWHgCMlh4AI5ceAAAA&lang=en&fontScale=100&pass_ticket=y3bD%2BACG5stP%2F%2B7ldcfAxgFPLWPs%2FbSViNfqmX%2F2eLieOxArs3%2FzzfmWbe1mlcGU&wx_header=1"
target_url = "http://mp.weixin.qq.com/s?__biz=MjM5MDgzMDgwMw==&mid=2651745645&idx=1&sn=4f987c93d282ed59f533d534a9ef63b6&chksm=bd4414d18a339dc7d325a65f63d8bf0fa91d8155820c601258ee77d9a3f1db260efa4b319be8&scene=27#wechat_redirect"

# Host : mp.weixin.qq.com
# Cookie : devicetype=iOS11.4; lang=en; pass_ticket=y3bD+ACG5stP/+7ldcfAxgFPLWPs/bSViNfqmX/2eLieOxArs3/zzfmWbe1mlcGU; version=16070022; wap_sid2=CLGRu+8IElx4QmVDdmVFYm5sODcwVmdpOG9vT2FqSnlQckNoSFFseE52aERDLVRKYi0tdUQ4R09MTlBKYm55QVhUdEptdTlMS3BiUWtqQ2s4UXR5M0lKTzlBQzBWTVFEQUFBfjCJuvbZBTgNQJVO; wxuin=2381236401; pgv_pvi=4536995840; pgv_pvid=3605134098; g_ut=3; 3g_guest_id=-8753408813035397120; ua_id=BQxE8DAZPJt2IhLFAAAAACAKXThVP6WI4b8zwvEvmIU=; sd_cookie_crttime=1510970054194; sd_userid=45381510970054194
# X-WECHAT-KEY : ecdd57907ca7e547709dee8be4b7f8de68c69fd751b7a4da3948d1c5e3db865a242216fb8cf31d0ed91cebca7f939e38fddc9b4fa5fe77ad90ac9c7ab2932e04ac31d962af916a1c4ae1390db3c132f7
# X-WECHAT-UIN : MjM4MTIzNjQwMQ%3D%3D
# Accept : text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
# User-Agent : Mozilla/5.0 (iPhone; CPU iPhone OS 11_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15F79 MicroMessenger/6.7.0 NetType/WIFI Language/en
# Accept-Language : en-us
# Accept-Encoding : br, gzip, deflate
# Connection : keep-alive

host = "mp.weixin.qq.com"
cookie = "devicetype=iOS11.4; lang=en; pass_ticket=y3bD+ACG5stP/+7ldcfAxgFPLWPs/bSViNfqmX/2eLieOxArs3/zzfmWbe1mlcGU; version=16070022; wap_sid2=CLGRu+8IElx4QmVDdmVFYm5sODcwVmdpOG9vT2FqSnlQckNoSFFseE52aERDLVRKYi0tdUQ4R09MTlBKYm55QVhUdEptdTlMS3BiUWtqQ2s4UXR5M0lKTzlBQzBWTVFEQUFBfjCJuvbZBTgNQJVO; wxuin=2381236401; pgv_pvi=4536995840; pgv_pvid=3605134098; g_ut=3; 3g_guest_id=-8753408813035397120; ua_id=BQxE8DAZPJt2IhLFAAAAACAKXThVP6WI4b8zwvEvmIU=; sd_cookie_crttime=1510970054194; sd_userid=45381510970054194"
wechat_key = "ecdd57907ca7e547709dee8be4b7f8de68c69fd751b7a4da3948d1c5e3db865a242216fb8cf31d0ed91cebca7f939e38fddc9b4fa5fe77ad90ac9c7ab2932e04ac31d962af916a1c4ae1390db3c132f7"
wechat_uin = "MjM4MTIzNjQwMQ%3D%3D"
accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
user_agent = "Mozilla/5.0 (iPhone; CPU iPhone OS 11_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15F79 MicroMessenger/6.7.0 NetType/WIFI Language/en"
accept_languge = "Accept-Language : en-us"
accept_encoding = "br, gzip, deflate"
connection = "keep-alive"

headers = {
    "Host" : host,
    "Cookie" : cookie,
    "X-WECHAT-KEY" : wechat_key,
    "X-WECHAT-UIN" : wechat_uin,
    "Accept" : accept,
    "User-Agent" : user_agent,
    "Accept-Language" : accept_languge,
    "Accept-Encoding" : accept_encoding,
    "Connection" : connection
}

# import requests
#
# r = requests.get(url=target_url, headers=headers)
# html_str = r.text
# print(html_str)
#
#
# from lxml import etree
#
# html = etree.HTML(html_str)
# pretty_str = etree.tostring(html, encoding="unicode", pretty_print=True)
#
# with open("temp.html", "wb") as f:
#     f.write(pretty_str.encode("UTF8"))

from webchat_any_proxy import WeChatAnyProxy

proxy = WeChatAnyProxy(host="192.168.0.105", port=8002)
req = proxy.get_latest_request()
reqHeader = req.get("reqHeader")

import requests
target_url = "https://mp.weixin.qq.com/s?__biz=MjM5MDgzMDgwMw==&mid=2651745517&idx=1&sn=5155c7eb17744ef157a6549b0bd8f416&chksm=bd4415518a339c47c91016a11f6d27f718ae38c39f572ba5d6b12cc69bfd6f973c3542736868&scene=4&subscene=126&ascene=0&devicetype=iOS11.4&version=16070022&nettype=WIFI&abtest_cookie=AwABAAoACwAMAAcAPoseAGSVHgC5lR4AF5YeAIaWHgCMlh4AI5ceAAAA&lang=en&fontScale=100&pass_ticket=y3bD%2BACG5stP%2F%2B7ldcfAxgFPLWPs%2FbSViNfqmX%2F2eLieOxArs3%2FzzfmWbe1mlcGU&wx_header=1"
target_url = "https://mp.weixin.qq.com/s?__biz=MjM5MDgzMDgwMw==&mid=2651745517&idx=2&sn=ba1550b3f4a4d6a242e356948fadf759&chksm=bd4415518a339c47de1b73830c48a5aca7a7932beb59c992a10692fd61588992d7abc8d0d7c1&scene=4&ascene=0&devicetype=iOS11.4&version=16070022&nettype=WIFI&abtest_cookie=AwABAAoACwAMAAcAPoseAGSVHgC5lR4AF5YeAIaWHgCMlh4AI5ceAAAA&lang=en&fontScale=100&pass_ticket=y3bD%2BACG5stP%2F%2B7ldcfAxgFPLWPs%2FbSViNfqmX%2F2eLieOxArs3%2FzzfmWbe1mlcGU&wx_header=1"
r = requests.get(url=target_url, headers=headers)
html_str = r.text
# print(html_str)

from lxml import etree

html = etree.HTML(html_str)
pretty_str = etree.tostring(html, encoding="unicode", pretty_print=True)

with open("temp.html", "wb") as f:
    f.write(pretty_str.encode("UTF8"))

print("\r\n\r\n")

target_url = "https://mp.weixin.qq.com/mp/getappmsgext?f=json&mock=&uin=777&key=777&pass_ticket=y3bD%25252BACG5stP%25252F%25252B7ldcfAxgFPLWPs%25252FbSViNfqmX%25252F2eLieOxArs3%25252FzzfmWbe1mlcGU&wxtoken=777&devicetype=iOS11.4&clientversion=16070022&appmsg_token=964_IK9odEotcV1Lv9TI7JnRAsSzkHKqLvCtp6ORh_7UHi1yQYG9YHX5x5TYb6JLHGSJUNBSJ0_Rerp_A5YO&x5=0&f=json "
target_url = "https://mp.weixin.qq.com/mp/getappmsgext?f=json&mock=&uin=777&key=777&pass_ticket=y3bD%25252BACG5stP%25252F%25252B7ldcfAxgFPLWPs%25252FbSViNfqmX%25252F2eLieOxArs3%25252FzzfmWbe1mlcGU&wxtoken=777&devicetype=iOS11.4&clientversion=16070022&appmsg_token=964_w9x6PBkqMoicMV5bN7pPC562TEQpwhx59LWcU-8Op4iG9a1s5KPF8oJaKdPUFzkAtCwrYAYZzXwzuCwU&x5=0&f=json "
target_url = "https://mp.weixin.qq.com/mp/getappmsgext?f=json&mock=&uin=777&key=777&pass_ticket=y3bD%25252BACG5stP%25252F%25252B7ldcfAxgFPLWPs%25252FbSViNfqmX%25252F2eLieOxArs3%25252FzzfmWbe1mlcGU&wxtoken=777&devicetype=iOS11.4&clientversion=16070022&appmsg_token=964_6aqMjr4zZRwnEhsHN7pPC562TEQpwhx59LWcUxhYJtCSaPb8Y0uJTTjDnqpdUnOpBoG43edaqPQnDorj&x5=0&f=json"
target_url = "https://mp.weixin.qq.com/mp/getappmsgext?f=json&mock=&uin=777&key=777&pass_ticket=y3bD%25252BACG5stP%25252F%25252B7ldcfAxgFPLWPs%25252FbSViNfqmX%25252F2eLieOxArs3%25252FzzfmWbe1mlcGU&wxtoken=777&devicetype=iOS11.4&clientversion=16070022&appmsg_token=964_6aqMjr4zZRwnEhsHN7pPC562TEQpwhx59LWcUxhYJtCSaPb8Y0uJTTjDnqpdUnOpBoG43edaqPQnDorj&x5=0&f=json"
body = "r=0.039641611215266326&__biz=MjM5MDgzMDgwMw%3D%3D&appmsg_type=9&mid=2651745517&sn=5155c7eb17744ef157a6549b0bd8f416&idx=1&scene=4&title=%25E4%25BD%25A0%25E6%2595%2588%25E7%258E%2587%25E4%25BD%258E%25E4%25B8%258B%25EF%25BC%258C%25E6%2598%25AF%25E5%259B%25A0%25E4%25B8%25BA%25E4%25BD%25A0%25E6%25A0%25B9%25E6%259C%25AC%25E4%25B8%258D%25E4%25BC%259A%25E7%25AE%25A1%25E7%2590%2586%25E6%2597%25B6%25E9%2597%25B4&ct=1530062220&abtest_cookie=AwABAAoACwAMAAcAPoseAGSVHgC5lR4AF5YeAIaWHgCMlh4AI5ceAAAA&devicetype=iOS11.4&version=16070022&is_need_ticket=0&is_need_ad=1&comment_id=343425027632594946&is_need_reward=0&both_ad=0&reward_uin_count=0&send_time=&msg_daily_idx=1&is_original=0&is_only_read=1&req_id=0513gcTyHNqbW08UUascxsAq&pass_ticket=y3bD%25252BACG5stP%25252F%25252B7ldcfAxgFPLWPs%25252FbSViNfqmX%25252F2eLieOxArs3%25252FzzfmWbe1mlcGU&is_temp_url=0&item_show_type=undefined&tmp_version=1"
body = "r=0.9297181952278669&__biz=MjM5MDgzMDgwMw%3D%3D&appmsg_type=9&mid=2651745517&sn=ba1550b3f4a4d6a242e356948fadf759&idx=2&scene=4&title=%25E5%25BD%2592%25E5%25B1%259E%25E6%2584%259F%25E7%25BC%25BA%25E5%25A4%25B1%25E4%25B8%258B%25E7%259A%2584%25E4%25BA%25BA%25E6%2589%258D%25E5%259F%25B9%25E5%2585%25BB%25EF%25BC%259A%25E5%259F%25BA%25E5%25B1%2582%25E7%2594%25A8%25E2%2580%259C%25E6%25B5%2581%25E7%25A8%258B%25E2%2580%259D%25E3%2580%2581%25E4%25B8%25AD%25E5%25B1%2582%25E7%2594%25A8%25E2%2580%259C%25E8%2580%2583%25E6%25A0%25B8%25E2%2580%259D%25E3%2580%2581%25E9%25AB%2598%25E5%25B1%2582%25E7%2594%25A8%25E2%2580%259C%25E7%259B%2591%25E7%259D%25A3%25E2%2580%259D&ct=1530062220&abtest_cookie=AwABAAoACwAMAAcAPoseAGSVHgC5lR4AF5YeAIaWHgCMlh4AI5ceAAAA&devicetype=iOS11.4&version=16070022&is_need_ticket=0&is_need_ad=1&comment_id=343425028588896257&is_need_reward=1&both_ad=0&reward_uin_count=21&send_time=&msg_daily_idx=1&is_original=0&is_only_read=1&req_id=0514irhauCiFBwuz6JjTWa7E&pass_ticket=y3bD%25252BACG5stP%25252F%25252B7ldcfAxgFPLWPs%25252FbSViNfqmX%25252F2eLieOxArs3%25252FzzfmWbe1mlcGU&is_temp_url=0&item_show_type=undefined&tmp_version=1"
body = "r=0.07513887868461844&__biz=MjM5MDgzMDgwMw%3D%3D&appmsg_type=9&mid=2651745517&sn=ba1550b3f4a4d6a242e356948fadf759&idx=2&scene=4&title=%25E5%25BD%2592%25E5%25B1%259E%25E6%2584%259F%25E7%25BC%25BA%25E5%25A4%25B1%25E4%25B8%258B%25E7%259A%2584%25E4%25BA%25BA%25E6%2589%258D%25E5%259F%25B9%25E5%2585%25BB%25EF%25BC%259A%25E5%259F%25BA%25E5%25B1%2582%25E7%2594%25A8%25E2%2580%259C%25E6%25B5%2581%25E7%25A8%258B%25E2%2580%259D%25E3%2580%2581%25E4%25B8%25AD%25E5%25B1%2582%25E7%2594%25A8%25E2%2580%259C%25E8%2580%2583%25E6%25A0%25B8%25E2%2580%259D%25E3%2580%2581%25E9%25AB%2598%25E5%25B1%2582%25E7%2594%25A8%25E2%2580%259C%25E7%259B%2591%25E7%259D%25A3%25E2%2580%259D&ct=1530062220&abtest_cookie=AwABAAoACwAMAAcAPoseAGSVHgC5lR4AF5YeAIaWHgCMlh4AI5ceAAAA&devicetype=iOS11.4&version=16070022&is_need_ticket=0&is_need_ad=1&comment_id=343425028588896257&is_need_reward=1&both_ad=0&reward_uin_count=21&send_time=&msg_daily_idx=1&is_original=0&is_only_read=1&req_id=0514Li4bcm6XDTri4na5o2bW&pass_ticket=y3bD%25252BACG5stP%25252F%25252B7ldcfAxgFPLWPs%25252FbSViNfqmX%25252F2eLieOxArs3%25252FzzfmWbe1mlcGU&is_temp_url=0&item_show_type=undefined&tmp_version=1"

r = requests.post(url=target_url, data=body, headers=reqHeader)
print("SOCIAL:")
print(r.text)

print("\r\n\r\n")

comment_url = "https://mp.weixin.qq.com/mp/appmsg_comment?action=getcomment&scene=0&__biz=MjM5MDgzMDgwMw==&appmsgid=2651745517&idx=1&comment_id=343425027632594946&offset=0&limit=100&uin=777&key=777&pass_ticket=y3bD%25252BACG5stP%25252F%25252B7ldcfAxgFPLWPs%25252FbSViNfqmX%25252F2eLieOxArs3%25252FzzfmWbe1mlcGU&wxtoken=777&devicetype=iOS11.4&clientversion=16070022&appmsg_token=964_IK9odEotcV1Lv9TI7JnRAsSzkHKqLvCtp6ORh_7UHi1yQYG9YHX5x5TYb6JLHGSJUNBSJ0_Rerp_A5YO&x5=0&f=json"
comment_url = "https://mp.weixin.qq.com/mp/appmsg_comment?action=getcomment&scene=0&__biz=MjM5MDgzMDgwMw==&appmsgid=2651745517&idx=2&comment_id=343425028588896257&offset=0&limit=100&uin=777&key=777&pass_ticket=y3bD%25252BACG5stP%25252F%25252B7ldcfAxgFPLWPs%25252FbSViNfqmX%25252F2eLieOxArs3%25252FzzfmWbe1mlcGU&wxtoken=777&devicetype=iOS11.4&clientversion=16070022&appmsg_token=964_w9x6PBkqMoicMV5bN7pPC562TEQpwhx59LWcU-8Op4iG9a1s5KPF8oJaKdPUFzkAtCwrYAYZzXwzuCwU&x5=0&f=json "
comment_url = "https://mp.weixin.qq.com/mp/appmsg_comment?action=getcomment&scene=0&__biz=MjM5MDgzMDgwMw==&appmsgid=2651745517&idx=2&comment_id=343425028588896257&offset=0&limit=100&uin=777&key=777&pass_ticket=y3bD%25252BACG5stP%25252F%25252B7ldcfAxgFPLWPs%25252FbSViNfqmX%25252F2eLieOxArs3%25252FzzfmWbe1mlcGU&wxtoken=777&devicetype=iOS11.4&clientversion=16070022&appmsg_token=964_6aqMjr4zZRwnEhsHN7pPC562TEQpwhx59LWcUxhYJtCSaPb8Y0uJTTjDnqpdUnOpBoG43edaqPQnDorj&x5=0&f=json "
r = requests.post(url=comment_url, headers=reqHeader)
print("COMMENT:")
print(r.text)